name: Meson wrap update

on:
  schedule:
    # Run once per week (Monday at 09:00 UTC)
    - cron: "0 9 * * 1"
  workflow_dispatch:

permissions:
  contents: write
  pull-requests: write

jobs:
  update-wraps:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v6

    - name: Install Meson
      run: pip install meson

    - name: Update Meson wraps
      run: meson wrap update

    - name: Create pull request if changes
      uses: peter-evans/create-pull-request@v8
      with:
        commit-message: "[meson] Update wrap dependencies"
        branch: meson-wrap-update
        title: "Meson: update wrap dependencies"
        body: |
          This PR was automatically generated by GitHub Actions.

          It updates Meson wrap dependencies using:
          ```
          meson wrap update
          ```
